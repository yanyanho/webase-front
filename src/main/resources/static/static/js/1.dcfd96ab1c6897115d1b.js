webpackJsonp([1],{"9bBU":function(t,e,s){s("mClu");var a=s("FeBl").Object;t.exports=function(t,e,s){return a.defineProperty(t,e,s)}},C4MV:function(t,e,s){t.exports={default:s("9bBU"),__esModule:!0}},GBTu:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("bOdI"),n=s.n(a),r=s("P9l9"),i=s("yt7g"),o=s("YaEn"),c=s("Fd2+"),d=localStorage.getItem("assetList")?JSON.parse(localStorage.getItem("assetList")):[],u={name:"orderList",data:function(){return n()({amount:0,assetObj:null,amountShow:!1,nowTime:(new Date).getTime(),orderList:[],htlcExchangeList:[],userAddress:localStorage.getItem("userAddress"),changeAssetLength:JSON.parse(localStorage.getItem("changeAssetList")).length},"nowTime",(new Date).getTime())},mounted:function(){this.getHtlcExchange()},methods:{link:function(){o.a.push("/inTransaction")},getHtlcExchange:function(t,e){var s=this;Object(r.o)().then(function(t){var e=t.status,a=t.data;200===e?(s.htlcExchangeList=a,s.queryExchangeOrder()):s.$notify({type:"warning",message:t.data.message})}).catch(function(t){s.$notify({type:"danger",message:"系统错误"})})},queryExchangeOrder:function(){for(var t=this,e="",s=0;s<this.htlcExchangeList.length;s++)1==this.htlcExchangeList[s].groupId&&(e=this.htlcExchangeList[s].exchangeContractAddress);var a={userAddress:this.userAddress,groupId:1,exchangeContractAddress:e};Object(r.j)(a).then(function(e){var s=e.status,a=e.data;if(200===s){t.orderList=a.content;for(var n=0;n<t.orderList.length;n++)t.orderList[n].assetGiveMinUnit&&(t.orderList[n].amountGive=t.orderList[n].amountGive/Math.pow(10,t.orderList[n].assetGiveMinUnit)),t.orderList[n].assetGetMinUnit&&(t.orderList[n].amountGet=t.orderList[n].amountGet/Math.pow(10,t.orderList[n].assetGetMinUnit),t.orderList[n].amountGetLeft=t.orderList[n].amountGetLeft/Math.pow(10,t.orderList[n].assetGetMinUnit))}else t.$notify({type:"warning",message:e.data.message})}).catch(function(e){t.$notify({type:"danger",message:"系统错误"})})},trade:function(t){this.assetObj=t,this.amountShow=!0,this.amount=t.amountGet},cancel:function(t){var e=this;c.a.alert({title:"确认取消",message:"取消该订单，订单将会删除"}).then(function(){e.cancelOrder(t)})},cancelOrder:function(t){for(var e=this,s="",a=0;a<this.htlcExchangeList.length;a++)1==this.htlcExchangeList[a].groupId&&(s=this.htlcExchangeList[a].exchangeContractAddress);var n={groupId:1,exchangeContractAddress:s,userAddress:this.userAddress},i={orderHash:t.orderHash};Object(r.e)(n,i).then(function(t){200==t.status?t.data&&(e.queryExchangeOrder(),e.$notify({type:"success",message:"取消成功！"})):e.$notify({type:"warning",message:t.data.message})}).catch(function(t){e.$notify({type:"danger",message:"系统错误"})})},trakeConfirm:function(){var t=this;if(this.amount>this.assetObj.amountGetLeft)this.$notify({type:"warning",message:"不能超过该订单的剩余额度"});else{var e="";this.htlcExchangeList.forEach(function(t){"1"==t.groupId&&(e=t.exchangeContractAddress)});var s={userAddress:this.userAddress,groupId:"1",exchangeContractAddress:e},a={orderHash:this.assetObj.orderHash,amount:this.amount,assetGetMinUnit:this.assetObj.assetGetMinUnit};Object(r.h)(s,a).then(function(e){t.loading=!1,200==e.status?e.data&&t.queryExchangeOrder():t.$notify({type:"warning",message:e.data.message})}).catch(function(e){t.$notify({type:"danger",message:"系统错误"})})}},create:function(){o.a.push("/giveList")}},filters:{Time:function(t){return Object(i.b)(t)},Asset:function(t){for(var e=0;e<d.length;e++)if(d[e].contractAddress==t)return d[e].shortName;return t}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"module"},[s("div",{staticClass:"header"},[s("span",{on:{click:t.link}},[s("van-icon",{attrs:{name:"arrow-left"}}),t._v(" "),s("span",[t._v("返回")])],1)]),t._v(" "),s("ul",t._l(t.orderList,function(e){return s("li",{staticClass:"order-item"},[s("div",{staticClass:"order-item-user"},[s("span",{staticClass:"asset-style"},[t._v(t._s(e.assetGetShortName))]),t._v(" "+t._s(e.amountGet)+" ("),s("span",{staticStyle:{color:"#EA7500"}},[t._v("买入")]),t._v(") ==> "),s("span",{staticClass:"asset-style"},[t._v(t._s(e.assetGiveShortName))]),t._v(" "+t._s(e.amountGive)+"("),s("span",{staticStyle:{color:"#82D900"}},[t._v("卖出")]),t._v(")")]),t._v(" "),s("div",{staticClass:"order-item-content"},[t._v(t._s(e.assetGetShortName)+"剩余额度："+t._s(e.amountGetLeft)+" ")]),t._v(" "),s("div",{staticClass:"order-item-content",staticStyle:{"padding-left":"60px"}},[t._v(t._s(t._f("Time")(e.expires)))]),s("br"),t._v(" "),s("div",{staticClass:"order-item-content"},[t.nowTime<e.expires&&e.amountGetLeft==e.amountGet?s("span",{staticStyle:{color:"#00BB00"}},[t._v("新订单")]):t.nowTime<e.expires&&e.amountGetLeft!=e.amountGet?s("span",{staticStyle:{color:"#EAC100"}},[t._v("部分交易")]):s("span",{staticStyle:{color:"#EA0000"}},[t._v("超时")])]),t._v(" "),s("div",{staticClass:"order-item-content",staticStyle:{"padding-left":"60px"}},[e.maker==t.userAddress?s("span",{staticStyle:{color:"#9ACD32"}},[t._v("由我发起")]):s("span",{staticStyle:{color:"#EEAD0E"}},[t._v("他人发起")])]),t._v(" "),s("div",{staticStyle:{margin:"5px 0"}},[e.expires>t.nowTime&&e.maker!=t.userAddress?s("van-button",{attrs:{type:"primary",size:"small"},on:{click:function(s){return t.trade(e)}}},[t._v("交易")]):t._e(),t._v(" "),e.maker==t.userAddress?s("van-button",{attrs:{type:"primary",size:"small"},on:{click:function(s){return t.cancel(e)}}},[t._v("取消")]):t._e()],1)])}),0),t._v(" "),s("div",{staticClass:"cross-bottom"},[s("van-button",{staticStyle:{width:"100%"},attrs:{type:"default",disabled:!(t.changeAssetLength>0)},on:{click:t.create}},[t._v("创建订单")])],1),t._v(" "),s("van-dialog",{attrs:{title:"取出资产","show-cancel-button":""},on:{confirm:t.trakeConfirm},model:{value:t.amountShow,callback:function(e){t.amountShow=e},expression:"amountShow"}},[s("van-field",{attrs:{required:"",clearable:"",label:"金额",placeholder:"请输入金额"},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1)],1)},staticRenderFns:[]};var h=s("VU/8")(u,l,!1,function(t){s("x574")},"data-v-cc2e5ed6",null);e.default=h.exports},bOdI:function(t,e,s){"use strict";e.__esModule=!0;var a,n=s("C4MV"),r=(a=n)&&a.__esModule?a:{default:a};e.default=function(t,e,s){return e in t?(0,r.default)(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}},mClu:function(t,e,s){var a=s("kM2E");a(a.S+a.F*!s("+E39"),"Object",{defineProperty:s("evD5").f})},x574:function(t,e){}});