webpackJsonp([14],{QpKa:function(t,e){},t08k:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("mvHQ"),r=s.n(a),i=s("P9l9"),n=s("YaEn"),o={name:"addAsset",data:function(){return{assetType:"BAC001",groupList:[],groupId:"1",assetData:null,assetName:"",minUnit:0,totalAmount:null,description:"",errorMessage1:"",valiate1:!1,errorMessage2:"",valiate2:!1,errorMessage3:"",valiate3:!0}},mounted:function(){},methods:{change1:function(){if(!/^[a-zA-Z0-9_]{2,15}$/.test(this.assetName))return this.errorMessage1="允许3-16字节，允许字母数字下划线",void(this.valiate1=!1);this.errorMessage1="",this.valiate1=!0},change2:function(){return/^[1-9]d*|0$/.test(this.totalAmount)?this.totalAmount.length>13?(this.errorMessage2="资产额度为非负整数,长度不超过13位",void(this.valiate2=!1)):(this.errorMessage2="",void(this.valiate2=!0)):(this.errorMessage2="资产额度为非负整数",void(this.valiate2=!1))},change3:function(){return/^[1-9]d*|0$/.test(this.minUnit)?this.minUnit>2?(this.errorMessage3="资产精度为非负整数,范围为0-2",void(this.valiate3=!1)):(this.errorMessage3="",void(this.valiate3=!0)):(this.errorMessage3="资产精度为非负整数",void(this.valiate3=!1))},getGroupList:function(){var t=this;Object(i.u)().then(function(e){200==e.status?e.data&&e.data.length&&(t.groupList=e.data,t.groupId=e.data[0]):t.$notify({type:"warning",message:e.data.message})}).catch(function(e){t.$notify({type:"danger",message:"系统错误"})})},submit:function(){var t=this;if(this.valiate1)if(this.valiate2)if(this.valiate3){var e={userAddress:localStorage.getItem("userAddress"),groupId:this.groupId},s={shortName:this.assetName,minUnit:parseInt(this.minUnit),totalAmount:parseFloat(this.totalAmount),description:this.description};Object(i.q)(e,s).then(function(e){if(200==e.status){var s={shortName:t.assetName,minUnit:parseInt(t.minUnit),totalAmount:parseFloat(t.totalAmount),description:t.description,groupId:t.groupId,contractAddress:e.data,contractName:"BAC001",key:localStorage.getItem("userAddress")};t.getBalanceData(s)}else t.$notify({type:"warning",message:e.data.message})}).catch(function(e){t.$notify({type:"danger",message:"系统错误"})})}else this.errorMessage3="资产额度为非负整数,范围为0-18";else this.errorMessage2="资产额度为非负整数,长度不超过20位";else this.errorMessage1="允许3-16字节，允许字母数字下划线"},getBalanceData:function(t){var e=this,s={userAddress:localStorage.getItem("userAddress"),groupId:this.groupId,contractAddress:t.contractAddress};Object(i.l)(s).then(function(s){200===s.status?(s.data||0==s.data)&&(t.balance=s.data,e.getAssets(t)):e.$notify({type:"warning",message:s.data.message})}).catch(function(t){e.$notify({type:"danger",message:"系统错误"})})},getAssets:function(t){var e=0;this.assetList=JSON.parse(localStorage.getItem("assetList"))||[];for(var s=0;s<this.assetList.length;s++)this.assetList[s].contractAddress==t.contractAddress&&this.assetList[s].key==localStorage.getItem("userAddress")&&(this.assetList[s].contractAddress=t.contractAddress,this.assetList[s].contractName=t.contractName,this.assetList[s].description=t.description,this.assetList[s].groupId=t.groupId,this.assetList[s].minUnit=t.minUnit,this.assetList[s].shortName=t.shortName,this.assetList[s].status=t.status,this.assetList[s].totalAmount=t.totalAmount,this.assetList[s].key=localStorage.getItem("userAddress"),e++);if(0==e){var a={key:localStorage.getItem("userAddress"),contractAddress:t.contractAddress,contractName:t.contractName,description:t.description,groupId:t.groupId,minUnit:t.minUnit,shortName:t.shortName,status:t.status,totalAmount:t.totalAmount};this.assetList.push(a)}localStorage.setItem("assetList",r()(this.assetList)),n.a.push("/home")}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"module"},[s("van-cell-group",[s("van-field",{attrs:{required:"",clearable:"",label:"资产名称",placeholder:"请输入资产名称","error-message":t.errorMessage1},on:{blur:t.change1},model:{value:t.assetName,callback:function(e){t.assetName=e},expression:"assetName"}}),t._v(" "),s("van-field",{attrs:{type:"number",required:"",clearable:"",label:"资产精度",placeholder:"请输入资产精度","error-message":t.errorMessage3},on:{blur:t.change3},model:{value:t.minUnit,callback:function(e){t.minUnit=e},expression:"minUnit"}}),t._v(" "),s("van-field",{attrs:{type:"number",required:"",clearable:"",label:"发行总量",placeholder:"请输入发行总量",maxLength:"13","error-message":t.errorMessage2},on:{blur:t.change2},model:{value:t.totalAmount,callback:function(e){t.totalAmount=e},expression:"totalAmount"}}),t._v(" "),s("van-field",{attrs:{required:"",clearable:"",label:"备注",placeholder:"请输入备注"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),t._v(" "),s("van-button",{staticStyle:{width:"100%"},attrs:{type:"default"},on:{click:t.submit}},[t._v("确定")])],1)},staticRenderFns:[]};var c=s("VU/8")(o,l,!1,function(t){s("QpKa")},"data-v-59982e6c",null);e.default=c.exports}});