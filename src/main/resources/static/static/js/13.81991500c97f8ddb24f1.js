webpackJsonp([13],{"+goU":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),r=a("P9l9"),n=a("YaEn"),o=a("Fd2+"),d={name:"orderDetail",data:function(){return{orderData:null,userAddress:localStorage.getItem("userAddress"),newDate:(new Date).getTime(),htlcList:null,orderId:this.$route.query.orderId,trakeShow:!1,password:"",recipientTrakeShow:!1,recipientPassword:""}},mounted:function(){this.gethtlcContractAddress(),this.getOrders()},methods:{getOrders:function(){var t=this,e=localStorage.getItem("userAddress"),a={orderId:this.orderId};Object(r.m)(e,a).then(function(e){200==e.status?e.data.data&&e.data.data.length&&(t.orderData=e.data.data[0]):t.$notify({type:"warning",message:e.data.message})}).catch(function(e){t.$notify({type:"danger",message:"系统错误"})})},recipientDeposit:function(){var t=this,e={recipientHtlcContractAddress:this.htlcList[this.orderData.recipientAssetGroup],initiatorHtlcContractAddress:this.htlcList[this.orderData.initiatorAssetGroup],orderId:this.orderData.orderId,recipientLockTime:this.orderData.initiatorLockTime-6e4};Object(r.w)(e).then(function(e){200==e.status?(t.$notify({type:"success",message:"存入成功"}),t.getOrders()):t.$notify({type:"warning",message:e.data.message})}).catch(function(e){t.$notify({type:"danger",message:"系统错误"})})},gethtlcContractAddress:function(){var t=this;Object(r.n)().then(function(e){200==e.status?e.data&&"{}"!=i()(e.data)&&(t.htlcList=e.data):t.$notify({type:"warning",message:e.data.message})}).catch(function(e){t.$notify({type:"danger",message:"系统错误"})})},trake:function(){this.trakeShow=!0},recipientTrake:function(){this.recipientTrakeShow=!0},trakeConfirm:function(){this.password?(this.trakeShow=!1,this.withdrawTrake(1)):(this.trakeShow=!0,this.$notify({type:"warning",message:"请输入密文"}))},recipientTrakeConfirm:function(){this.recipientPassword?(this.recipientTrakeShow=!1,this.withdrawTrake(2)):(this.recipientTrakeShow=!0,this.$notify({type:"warning",message:"请输入密文"}))},withdrawTrake:function(t){var e=this,a=null;1==t?a={htlcContractAddress:this.htlcList[this.orderData.recipientAssetGroup],operation:3,orderId:this.orderData.orderId,secerte:this.password}:2==t&&(a={htlcContractAddress:this.htlcList[this.orderData.initiatorAssetGroup],operation:4,orderId:this.orderData.orderId,secerte:this.recipientPassword}),Object(r.A)(a).then(function(t){200==t.status?(e.$notify({type:"success",message:"取出资产成功"}),n.a.push("/crossLink")):e.$notify({type:"warning",message:t.data.message})}).catch(function(t){e.$notify({type:"danger",message:"系统错误"})})},oldTrake:function(){var t=this;o.a.confirm({title:"确认",message:"确定是否取回自己资产？"}).then(function(){t.initiatorRefund()}).catch(function(){})},toOldTrake:function(){var t=this;o.a.confirm({title:"确认",message:"确定是否取回自己资产？"}).then(function(){t.recipientRefund()}).catch(function(){})},initiatorRefund:function(){var t=this,e={htlcContractAddress:this.htlcList[this.orderData.initiatorAssetGroup],operation:5,orderId:this.orderData.orderId,userAddress:localStorage.getItem("userAddress")};Object(r.x)(e).then(function(e){200==e.status?(t.$notify({type:"success",message:"取回资产成功"}),n.a.push("/crossLink")):t.$notify({type:"warning",message:e.data.message})}).catch(function(e){t.$notify({type:"danger",message:"系统错误"})})},recipientRefund:function(){var t=this,e={htlcContractAddress:this.htlcList[this.orderData.recipientAssetGroup],operation:6,orderId:this.orderData.orderId,userAddress:localStorage.getItem("userAddress")};Object(r.x)(e).then(function(e){200==e.status?(t.$notify({type:"success",message:"取回资产成功"}),n.a.push("/crossLink")):t.$notify({type:"warning",message:e.data.message})}).catch(function(e){t.$notify({type:"danger",message:"系统错误"})})},link:function(){n.a.push("/crossLink")}},filters:{Status:function(t){return 1===t?"发起者已存入资产":2===t?"接收者已存入资产":3===t?"发起者已取出资产":4===t?"接收者已取出资产":5===t?"发起者已取回资产":6===t?"接收者已取回资产":void 0},DateTime:function(t){var e=new Date(t),a=e.getFullYear(),s=e.getMonth()+1,i=e.getDate(),r=e.getHours();r=r<10?"0"+r:r;var n=e.getMinutes();n=n<10?"0"+n:n;var o=e.getSeconds();return o=o<10?"0"+o:o,a+"-"+(s=s<10?"0"+s:s)+"-"+(i=i<10?"0"+i:i)+" "+r+":"+n+":"+o}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"module"},[a("div",[a("van-icon",{attrs:{name:"arrow-left",dot:""},on:{click:t.link}}),t._v(" "),a("span",[t._v("返回")])],1),t._v(" "),t.orderData?a("div",[a("div",{staticClass:"detail-list"},[a("span",{staticClass:"detail-list-label"},[t._v("from")]),a("br"),t._v(" "),a("span",{staticClass:"detail-list-content"},[t._v(t._s(t.orderData.initiator))])]),t._v(" "),a("div",{staticClass:"detail-list"},[a("span",{staticClass:"detail-list-label"},[t._v("to")]),a("br"),t._v(" "),a("span",{staticClass:"detail-list-content"},[t._v(t._s(t.orderData.recipient))])]),t._v(" "),a("div",{staticClass:"detail-list"},[a("span",{staticClass:"detail-list-label"},[t._v("发起方资产")]),a("br"),t._v(" "),a("span",{staticClass:"detail-list-content"},[t._v(t._s(t.orderData.initiatorAssetAmount)+"("+t._s(t.orderData.initiatorAssetName)+") - 群组"+t._s(t.orderData.initiatorAssetGroup))])]),t._v(" "),a("div",{staticClass:"detail-list"},[a("span",{staticClass:"detail-list-label"},[t._v("接收方资产")]),a("br"),t._v(" "),a("span",{staticClass:"detail-list-content"},[t._v(t._s(t.orderData.recipientAssetAmount)+"("+t._s(t.orderData.recipientAssetName)+") - 群组"+t._s(t.orderData.recipientAssetGroup))])]),t._v(" "),a("div",{staticClass:"detail-list"},[a("span",{staticClass:"detail-list-label"},[t._v("发起方锁定资产ID")]),a("br"),t._v(" "),a("span",{staticClass:"detail-list-content"},[t._v(t._s(t.orderData.initiatorLockContractAddress))])]),t._v(" "),a("div",{staticClass:"detail-list"},[a("span",{staticClass:"detail-list-label"},[t._v("接收方锁定资产ID")]),a("br"),t._v(" "),a("span",{staticClass:"detail-list-content"},[t._v(t._s(t.orderData.recipientLockContractAddress||"-"))])]),t._v(" "),a("div",{staticClass:"detail-list"},[a("span",{staticClass:"detail-list-label"},[t._v("过期时间")]),a("br"),t._v(" "),t.orderData.initiatorLockTime?a("span",{staticClass:"detail-list-content"},[t._v(t._s(t._f("DateTime")(t.orderData.initiatorLockTime))+"(发起方)")]):t._e(),a("br"),t._v(" "),t.orderData.recipientLockTime?a("span",{staticClass:"detail-list-content"},[t._v(t._s(t._f("DateTime")(t.orderData.recipientLockTime))+"(接收方)")]):t._e()]),t._v(" "),a("div",{staticClass:"detail-list"},[a("span",{staticClass:"detail-list-label"},[t._v("订单状态")]),a("br"),t._v(" "),a("span",{staticClass:"detail-list-content"},[t._v(t._s(t._f("Status")(t.orderData.orderStatus)))])]),t._v(" "),t.userAddress==t.orderData.initiator?a("div",{staticClass:"detail-list"},[a("span",{staticClass:"detail-list-label"},[t._v("发起者")]),a("br"),t._v(" "),a("span",{staticClass:"detail-list-content"},[t._v("本人发起")])]):t._e(),t._v(" "),t.userAddress==t.orderData.recipient?a("div",{staticClass:"detail-list"},[a("span",{staticClass:"detail-list-label"},[t._v("发起者")]),a("br"),t._v(" "),a("span",{staticClass:"detail-list-content"},[t._v("他人发起")])]):t._e(),t._v(" "),a("div",{staticStyle:{"margin-top":"10px","padding-bottom":"40px"}},[1==t.orderData.orderStatus&&t.userAddress==t.orderData.recipient?a("van-button",{attrs:{type:"default"},on:{click:t.recipientDeposit}},[t._v("存入资产")]):t._e(),t._v(" "),2==t.orderData.orderStatus&&t.userAddress==t.orderData.initiator?a("van-button",{attrs:{type:"default"},on:{click:t.trake}},[t._v("取出资产")]):t._e(),t._v(" "),3==t.orderData.orderStatus&&t.userAddress==t.orderData.recipient?a("van-button",{attrs:{type:"default"},on:{click:t.recipientTrake}},[t._v("取出资产")]):t._e(),t._v(" "),(1===t.orderData.orderStatus||2===t.orderData.orderStatus||3===t.orderData.orderStatus)&&t.userAddress==t.orderData.initiator&&t.orderData.initiatorLockTime&&t.orderData.initiatorLockTime<t.newDate?a("van-button",{attrs:{type:"default"},on:{click:t.oldTrake}},[t._v("取回资产")]):t._e(),t._v(" "),(1===t.orderData.orderStatus||2===t.orderData.orderStatus||5===t.orderData.orderStatus)&&t.userAddress==t.orderData.recipient&&t.orderData.recipientLockTime&&t.orderData.recipientLockTime<t.newDate?a("van-button",{attrs:{type:"default"},on:{click:t.toOldTrake}},[t._v("取回资产")]):t._e()],1),t._v(" "),a("van-dialog",{attrs:{title:"取出资产","show-cancel-button":""},on:{confirm:t.trakeConfirm},model:{value:t.trakeShow,callback:function(e){t.trakeShow=e},expression:"trakeShow"}},[a("van-field",{attrs:{required:"",clearable:"",label:"密文",placeholder:"请输入密文"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),a("van-dialog",{attrs:{title:"取出资产","show-cancel-button":""},on:{confirm:t.recipientTrakeConfirm},model:{value:t.recipientTrakeShow,callback:function(e){t.recipientTrakeShow=e},expression:"recipientTrakeShow"}},[a("van-field",{attrs:{required:"",clearable:"",label:"密文",placeholder:"请输入密文"},model:{value:t.recipientPassword,callback:function(e){t.recipientPassword=e},expression:"recipientPassword"}})],1)],1):t._e()])},staticRenderFns:[]};var l=a("VU/8")(d,c,!1,function(t){a("hM8w")},"data-v-63401462",null);e.default=l.exports},hM8w:function(t,e){}});