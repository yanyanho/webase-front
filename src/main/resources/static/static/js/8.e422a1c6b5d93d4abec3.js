webpackJsonp([8],{ZIXF:function(t,s){},zKIK:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("mvHQ"),n=e.n(a),i=e("P9l9"),r=e("YaEn"),l={name:"asset",data:function(){return{assetList:[],newAssetList:[],userName:sessionStorage.getItem("userName")||"",defaultAsset:[],newDefaultAssetList:[]}},mounted:function(){this.getDefaultAssetList(),this.getAllBalance()},methods:{getDefaultAssetList:function(){var t=this;Object(i.b)().then(function(s){200===s.status?(s.data||0==s.data)&&(t.defaultAsset=s.data.data,t.defaultAsset.forEach(function(t){t.assetType="default",t.contractAddress=t.assetAddress,t.key=t.owner,t.groupId=t.assetGroup}),localStorage.setItem("defaultAssetList",n()(t.defaultAsset)),t.getDefaultBalance()):t.$notify({type:"warning",message:s.data.message})}).catch(function(t){})},getDefaultBalance:function(){var t=this;if(localStorage.getItem("userAddress")){this.defaultAssetList=JSON.parse(localStorage.getItem("defaultAssetList"))||[];for(var s=function(s){var e={userAddress:localStorage.getItem("userAddress"),groupId:t.defaultAssetList[s].groupId,contractAddress:t.defaultAssetList[s].assetAddress};Object(i.l)(e).then(function(e){200===e.status?(e.data||0==e.data)&&(t.defaultAssetList[s].balance=e.data,t.newDefaultAssetList.push(t.defaultAssetList[s])):(t.$notify({type:"warning",message:e.data.message}),t.defaultAssetList[s].balance=0,t.newDefaultAssetList.push(t.defaultAssetList[s]))}).catch(function(e){t.$notify({type:"danger",message:"系统错误"}),t.defaultAssetList[s].balance=0,t.newDefaultAssetList.push(t.defaultAssetList[s])})},e=0;e<this.defaultAssetList.length;e++)s(e)}},getAllBalance:function(){var t=this;if(localStorage.getItem("userAddress")){this.assetList=JSON.parse(localStorage.getItem("assetList"))||[];for(var s=function(s){if(t.assetList[s].key==localStorage.getItem("userAddress")){var e={userAddress:localStorage.getItem("userAddress"),groupId:t.assetList[s].groupId,contractAddress:t.assetList[s].contractAddress};Object(i.l)(e).then(function(e){200===e.status?(e.data||0==e.data)&&(t.assetList[s].balance=e.data,t.newAssetList.push(t.assetList[s])):(t.$notify({type:"warning",message:e.data.message}),t.assetList[s].balance=0,t.newAssetList.push(t.assetList[s]))}).catch(function(e){t.$notify({type:"danger",message:"系统错误"}),t.assetList[s].balance=0,t.newAssetList.push(t.assetList[s])})}},e=0;e<this.assetList.length;e++)s(e)}},open:function(t){var s="";s="default"===t.assetType?t.assetAddress:t.contractAddress,r.a.push({path:"assetDetail",query:{assetAddress:s,assetType:t.assetType||""}})},add:function(){r.a.push("/addAsset")},issue:function(){r.a.push("/issueAsset")},transfer:function(t){console.log(t),r.a.push({path:"/transfer",query:{assetAddress:t.contractAddress}})}}},c={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"module"},[e("div",{staticClass:"home-data"},[e("ul",{staticClass:"home-content"},t._l(t.newAssetList,function(s){return e("li",{staticClass:"list-content",on:{click:function(e){return t.open(s)}}},[e("svg",{staticClass:"icon",staticStyle:{width:"28px",height:"28px"},attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#wbs-icon-qianbi"}})]),t._v(" "),e("div",{staticClass:"list-left"},[e("span",[t._v(t._s(s.shortName))]),e("br"),t._v(" "),e("span",[t._v(t._s(s.contractName))])]),t._v(" "),e("div",{staticClass:"list-right"},[e("span",[t._v(t._s(s.balance.toFixed(s.minUnit)))])]),t._v(" "),e("div",{staticClass:"list-button"},[e("van-button",{staticClass:"list-transfer",attrs:{type:"primary",size:"small"},on:{click:function(e){return e.stopPropagation(),t.transfer(s)}}},[t._v("转账")])],1)])}),0),t._v(" "),t.defaultAsset.length>0?e("div",[e("div",[t._v("默认资产")]),t._v(" "),e("ul",t._l(t.newDefaultAssetList,function(s,a){return e("li",{key:a,staticClass:"list-content",on:{click:function(e){return t.open(s)}}},[e("svg",{staticClass:"icon",staticStyle:{width:"28px",height:"28px"},attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#wbs-icon-qianbi"}})]),t._v(" "),e("div",{staticClass:"list-left"},[e("span",[t._v(t._s(s.shortName))]),e("br"),t._v(" "),e("span",[t._v(t._s(s.contractName))])]),t._v(" "),e("div",{staticClass:"list-right"},[e("span",[t._v(t._s(s.balance.toFixed(s.minUnit)))])]),t._v(" "),e("div",{staticClass:"list-button"},[e("van-button",{staticClass:"list-transfer",attrs:{type:"primary",size:"small"},on:{click:function(e){return e.stopPropagation(),t.transfer(s)}}},[t._v("转账")])],1)])}),0)]):t._e()]),t._v(" "),e("div",{staticClass:"cross-bottom"},["admin"===t.userName?e("van-button",{staticStyle:{width:"50%"},attrs:{type:"default"},on:{click:t.add}},[t._v("添加资产")]):t._e(),t._v(" "),"admin"!==t.userName?e("van-button",{staticStyle:{width:"100%"},attrs:{type:"default"},on:{click:t.add}},[t._v("添加资产")]):t._e(),t._v(" "),"admin"===t.userName?e("van-button",{staticStyle:{width:"50%"},attrs:{type:"default"},on:{click:t.issue}},[t._v("发行资产")]):t._e()],1)])},staticRenderFns:[]};var u=e("VU/8")(l,c,!1,function(t){e("ZIXF")},null,null);s.default=u.exports}});