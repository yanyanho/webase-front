webpackJsonp([10],{MW9V:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("P9l9"),n=a("YaEn"),r={name:"transfer",data:function(){return{address:"",account:0,data:"",assetAddress:this.$route.query.assetAddress,assetData:null,defaultAssetList:JSON.parse(localStorage.getItem("defaultAssetList"))||[],assetList:[]}},mounted:function(){this.getData()},methods:{getData:function(){this.assetList=JSON.parse(localStorage.getItem("assetList"))||[],this.assetList=this.assetList.concat(this.defaultAssetList);for(var t=0;t<this.assetList.length;t++)this.assetList[t].contractAddress!=this.assetAddress||this.assetList[t].key!=localStorage.getItem("userAddress")&&this.assetList[t].owner!=localStorage.getItem("userAddress")||(this.assetData=this.assetList[t],this.getdataBlance())},getdataBlance:function(){var t=this;if(localStorage.getItem("userAddress")){var s={userAddress:localStorage.getItem("userAddress"),groupId:this.assetData.groupId,contractAddress:this.assetData.contractAddress};Object(e.l)(s).then(function(s){200===s.status?(s.data||0==s.data)&&(t.assetData.balance=s.data):(t.$notify({type:"warning",message:s.data.message}),t.assetData.balance=0)}).catch(function(s){t.$notify({type:"danger",message:"系统错误"}),t.assetData.balance=0})}},submit:function(){var t=this,s=void 0;if(this.account&&(s=this.account.split(".")[1]),s&&s.length>this.assetData.minUnit)this.$notify({type:"warning",message:"转账精度超过资产精度"});else if(parseFloat(this.account)>this.assetData.balance)this.$notify({type:"warning",message:"转账额度不能超过该资产链上剩余额度"});else{var a={contractAddress:this.assetData.contractAddress,contractName:this.assetData.contractName,groupId:this.assetData.groupId},r={from:localStorage.getItem("userAddress"),to:this.address,value:parseFloat(this.account),minUnit:this.assetData.minUnit,data:this.data};Object(e.A)(a,r).then(function(s){200==s.status?(t.$notify({type:"success",message:"转账成功"}),n.a.push({path:"/assetDetail",query:{assetAddress:t.assetAddress}})):(t.$notify({type:"warning",message:s.data.message}),n.a.push({path:"/assetDetail",query:{assetAddress:t.assetAddress}}))}).catch(function(s){t.$notify({type:"danger",message:"系统错误"}),n.a.push({path:"/assetDetail",query:{assetAddress:t.assetAddress}})})}}}},i={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("van-cell-group",[a("van-field",{attrs:{required:"",clearable:"",label:"接收者",placeholder:"请输入接收者地址"},model:{value:t.address,callback:function(s){t.address=s},expression:"address"}}),t._v(" "),a("van-field",{attrs:{label:"金额",placeholder:"请输入额度",required:"",maxLength:"15"},model:{value:t.account,callback:function(s){t.account=s},expression:"account"}}),t._v(" "),a("van-field",{attrs:{label:"备注",placeholder:"请输入备注",required:""},model:{value:t.data,callback:function(s){t.data=s},expression:"data"}})],1),t._v(" "),a("van-button",{staticStyle:{width:"100%"},attrs:{type:"default"},on:{click:t.submit}},[t._v("确定")])],1)},staticRenderFns:[]};var d=a("VU/8")(r,i,!1,function(t){a("n47q")},null,null);s.default=d.exports},n47q:function(t,s){}});