webpackJsonp([9],{InOV:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("mvHQ"),n=a.n(e),r=a("P9l9"),i=a("YaEn"),o={name:"addAsset",data:function(){return{assetaddress:"",assetType:"BAC001",groupList:[],groupId:"",assetData:null}},mounted:function(){this.getGroupList()},methods:{getGroupList:function(){var t=this;Object(r.q)().then(function(s){200==s.status?s.data&&s.data.length&&(t.groupList=s.data,t.groupId=s.data[0]):t.$notify({type:"warning",message:s.data.message})}).catch(function(s){t.$notify({type:"danger",message:"系统错误"})})},submit:function(){var t=this,s={contractAddress:this.assetaddress,contractName:this.assetType,groupId:this.groupId};Object(r.a)(s).then(function(s){200==s.status?s.data&&(s.data.status?s.data.statusContent="暂停":s.data.statusContent="启动",t.assetData=s.data,t.getBalanceData()):t.$notify({type:"warning",message:s.data.message})}).catch(function(s){t.$notify({type:"danger",message:"系统错误"})})},getBalanceData:function(){var t=this,s={userAddress:localStorage.getItem("userAddress"),groupId:this.assetData.groupId,contractAddress:this.assetData.contractAddress};Object(r.j)(s).then(function(s){200===s.status?(s.data||0==s.data)&&(t.assetData.balance=s.data,t.getAssets(t.assetData)):t.$notify({type:"warning",message:s.data.message})}).catch(function(s){t.$notify({type:"danger",message:"系统错误"})})},getAssets:function(t){var s=0;this.assetList=JSON.parse(localStorage.getItem("assetList"))||[];for(var a=0;a<this.assetList.length;a++)this.assetList[a].contractAddress==t.contractAddress&&this.assetList[a].key==localStorage.getItem("userAddress")&&(this.assetList[a].contractAddress=t.contractAddress,this.assetList[a].contractName=t.contractName,this.assetList[a].description=t.description,this.assetList[a].groupId=t.groupId,this.assetList[a].minUnit=t.minUnit,this.assetList[a].shortName=t.shortName,this.assetList[a].status=t.status,this.assetList[a].totalAmount=t.totalAmount,this.assetList[a].key=localStorage.getItem("userAddress"),s++);if(0==s){var e={key:localStorage.getItem("userAddress"),contractAddress:t.contractAddress,contractName:t.contractName,description:t.description,groupId:t.groupId,minUnit:t.minUnit,shortName:t.shortName,status:t.status,totalAmount:t.totalAmount};this.assetList.push(e)}localStorage.setItem("assetList",n()(this.assetList)),i.a.push("/home")}}},d={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"module"},[a("van-cell-group",[a("van-field",{attrs:{required:"",clearable:"",label:"资产地址",placeholder:"请输入资产地址"},model:{value:t.assetaddress,callback:function(s){t.assetaddress=s},expression:"assetaddress"}}),t._v(" "),a("van-field",{attrs:{label:"资产类型",placeholder:"请输入资产类型",required:""},model:{value:t.assetType,callback:function(s){t.assetType=s},expression:"assetType"}})],1),t._v(" "),t.groupList&&t.groupList.length?a("van-radio-group",{staticStyle:{"font-size":"14px",margin:"10px 0"},model:{value:t.groupId,callback:function(s){t.groupId=s},expression:"groupId"}},[a("span",{staticClass:"radio-item"},[t._v("群组")]),t._v(" "),a("div",{staticClass:"radio-content"},t._l(t.groupList,function(s){return a("van-radio",{key:s,attrs:{name:s}},[t._v("群组"+t._s(s))])}),1)]):t._e(),t._v(" "),a("van-button",{staticStyle:{width:"100%"},attrs:{type:"default"},on:{click:t.submit}},[t._v("确定")])],1)},staticRenderFns:[]};var c=a("VU/8")(o,d,!1,function(t){a("JNEj")},"data-v-7d2b5e60",null);s.default=c.exports},JNEj:function(t,s){}});