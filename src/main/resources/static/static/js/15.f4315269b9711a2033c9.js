webpackJsonp([15],{InOV:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("mvHQ"),n=e.n(a),o=e("P9l9"),r=e("YaEn"),i={name:"addAsset",data:function(){return{assetaddress:"",assetType:"BAC001",groupList:[],groupId:"1",assetData:null,errorMessage:"",valiate:!1,assetList:[],showPicker:!1,shortName:""}},mounted:function(){},methods:{changeAsset:function(){var t=this;if(42!=this.assetaddress.length){var s={shortName:this.shortName};Object(o.z)(s).then(function(s){200==s.status?(t.assetList=s.data,t.assetList.length?t.showPicker=!0:t.showPicker=!1):t.$notify({type:"warning",message:s.data.message})}).catch(function(s){t.$notify({type:"danger",message:"系统错误"})})}else this.assetaddress=this.shortName},onConfirm:function(t){console.log(t),this.shortName=t.shortName,this.assetaddress=t.assetAddress,this.assetType=t.contractName,this.showPicker=!1},change:function(){},getGroupList:function(){var t=this;Object(o.u)().then(function(s){200==s.status?s.data&&s.data.length&&(t.groupList=s.data,t.groupId=s.data[0]):t.$notify({type:"warning",message:s.data.message})}).catch(function(s){t.$notify({type:"danger",message:"系统错误"})})},submit:function(){var t=this,s={contractAddress:this.assetaddress,contractName:this.assetType,groupId:this.groupId};Object(o.a)(s).then(function(s){200==s.status?s.data&&(s.data.status?s.data.statusContent="暂停":s.data.statusContent="启动",t.assetData=s.data,t.getBalanceData()):t.$notify({type:"warning",message:s.data.message})}).catch(function(s){t.$notify({type:"danger",message:"系统错误"})})},getBalanceData:function(){var t=this,s={userAddress:localStorage.getItem("userAddress"),groupId:this.assetData.groupId,contractAddress:this.assetData.contractAddress};Object(o.l)(s).then(function(s){200===s.status?(s.data||0==s.data)&&(t.assetData.balance=s.data,t.getAssets(t.assetData)):t.$notify({type:"warning",message:s.data.message})}).catch(function(s){t.$notify({type:"danger",message:"系统错误"})})},getAssets:function(t){var s=0;this.assetList=JSON.parse(localStorage.getItem("assetList"))||[];for(var e=0;e<this.assetList.length;e++)this.assetList[e].contractAddress==t.contractAddress&&this.assetList[e].key==localStorage.getItem("userAddress")&&(this.assetList[e].contractAddress=t.contractAddress,this.assetList[e].contractName=t.contractName,this.assetList[e].description=t.description,this.assetList[e].groupId=t.groupId,this.assetList[e].minUnit=t.minUnit,this.assetList[e].shortName=t.shortName,this.assetList[e].status=t.status,this.assetList[e].totalAmount=t.totalAmount,this.assetList[e].key=localStorage.getItem("userAddress"),s++);if(0==s){var a={key:localStorage.getItem("userAddress"),contractAddress:t.contractAddress,contractName:t.contractName,description:t.description,groupId:t.groupId,minUnit:t.minUnit,shortName:t.shortName,status:t.status,totalAmount:t.totalAmount};this.assetList.push(a)}localStorage.setItem("assetList",n()(this.assetList)),r.a.push("/home")}}},c={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"module"},[e("van-cell-group",[e("van-field",{attrs:{required:"",clearable:"",label:"资产",placeholder:"请输入资产地名称或地址","error-message":t.errorMessage},on:{input:t.changeAsset,blur:t.change},model:{value:t.shortName,callback:function(s){t.shortName=s},expression:"shortName"}}),t._v(" "),e("van-field",{attrs:{label:"资产类型",placeholder:"请输入资产类型",required:""},model:{value:t.assetType,callback:function(s){t.assetType=s},expression:"assetType"}})],1),t._v(" "),e("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(s){t.showPicker=s},expression:"showPicker"}},[e("van-picker",{attrs:{"show-toolbar":"",columns:t.assetList,"value-key":"shortName"},on:{cancel:function(s){t.showPicker=!1},confirm:t.onConfirm}})],1),t._v(" "),e("van-button",{staticStyle:{width:"100%"},attrs:{type:"default"},on:{click:t.submit}},[t._v("确定")])],1)},staticRenderFns:[]};var d=e("VU/8")(i,c,!1,function(t){e("aftC")},"data-v-53859150",null);s.default=d.exports},aftC:function(t,s){}});